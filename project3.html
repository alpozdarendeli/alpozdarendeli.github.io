<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project 3: Face Morphing</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
            background-color: #f4f4f4;
            color: #333;
        }
        h1, h2 {
            color: #2c3e50;
        }
        h1 {
            border-bottom: 2px solid #2c3e50;
            padding-bottom: 10px;
        }
        .project-overview {
            background-color: #fff;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .image-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        .image-gri {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        .image-gr {
            display: grid;
            grid-template-columns: repeat(1, 1fr);
            gap: 15px;
            margin-bottom: 20px;
            justify-items: center; 
            align-items: center; 
        }
        .image-g {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        .image-container {
            background-color: #fff;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .image-container img {
            max-width: 100%;
            height: auto;
            border-radius: 3px;
        }
        .image-subtitle {
            margin-top: 8px;
            font-style: italic;
            font-size: 0.9em;
            color: #555;
        }
        .clear-float {
            clear: both;
            width: 100%;
        }
        .image-description {
            margin-top: 8px;
            font-style: italic;
            font-size: 0.9em;
            color: #555;
        }
                
        .equation {
            margin: 20px 0;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>Project 3: Face Morphing</h1>
    <h2>Alp Eren Ozdarendeli</h2>

    <div class="Background">
        <h2>Background</h2>
        <p> In this project, I aim to successfully face morph Larry David to my roommate Can, whom I watch Curb Your Enthuasiasm together.</p>
    </div>
    
    <div class="project-overview">
        <h2>Part 1:  Defining Correspondences</h2>
            <p> To morph two images, we need to select points of correspondences. I used the given tool to select points on the images. After defining the correspondences, I used Delaney Triangulation to triangulate the mean points of Larry David's and Can Ruso's images. </p>
            <div class="image-grid">
            <div class="image-container">
                <img src="proj3images/ruso_triangulate.png" alt="d_x.jpg">
                <p class="image-subtitle">Ruso points</p>
            </div>
            <div class="image-container">
                <img src="proj3images/david_triangulate.png" alt="d_y.jpg">
                <p class="image-subtitle">David points</p>
            </div>
            <div class="image-container">
                <img src="proj3images/mid_triangulate.png" alt="magnitude.jpg">
                <p class="image-subtitle">Mean points on Can Ruso</p>
            </div>
        </div>
        <div class="clear-float"></div>
        <h2>Part 2: Computing the "Mid-way Face"</h2>
        <!DOCTYPE html>
<html lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Affine Transformation Explanation</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
        });
    </script>

    <h1>Affine Transformation Explanation</h1>

    <h2>Triangle Transformation</h2>
    <p>Consider two triangles:</p>
    <ul>
        <li>Original triangle with points $p_1, p_2, p_3$, each with coordinates $(x_i, y_i), i=1, 2, 3$</li>
        <li>Transformed triangle with points $q_1, q_2, q_3$, following the same formalism</li>
    </ul>

    <h2>Affine Transformation Matrix</h2>
    <p>If a 3x3 affine transformation matrix A exists, then:</p>
    <div class="equation">
        \[A\vec{p_i'} = \vec{q_i'}\]
    </div>
    <p>Where $p'$ represents $p$ padded by a 1 at the bottom to allow for affine transformation.</p>

    <h2>Matrix Breakdown</h2>
    <p>Breaking down matrix A further:</p>
    <div class="equation">
        \[
        \begin{bmatrix}
        a & b & c \\
        d & e & f \\
        0 & 0 & 1
        \end{bmatrix}
        \begin{bmatrix}
        px_i \\
        py_i \\
        1
        \end{bmatrix} =
        \begin{bmatrix}
        qx_i \\
        qy_i \\
        1
        \end{bmatrix}
        \]
    </div>

    <h2>System of Equations</h2>
    <p>This gives us the following system of equations:</p>
    <div class="equation">
        \[
        \begin{aligned}
        apx_i + bpy_i + c + 0d + 0e + 0f &= qx_i \\
        0a + 0b + 0c + dpx_i + epy_i + f &= qy_i
        \end{aligned}
        \]
    </div>

    <h2>Expanded Equations</h2>
    <p>Expanding for all 3 points:</p>
    <div class="equation">
        \[
        \begin{aligned}
        apx_1 + bpy_1 + c + 0d + 0e + 0f &= qx_1 \\
        0a + 0b + 0c + dpx_1 + epy_1 + f &= qy_1 \\
        apx_2 + bpy_2 + c + 0d + 0e + 0f &= qx_2 \\
        0a + 0b + 0c + dpx_2 + epy_2 + f &= qy_2 \\
        apx_3 + bpy_3 + c + 0d + 0e + 0f &= qx_3 \\
        0a + 0b + 0c + dpx_3 + epy_3 + f &= qy_3
        \end{aligned}
        \]
    </div>

    <h2>Matrix Form Solution</h2>
    <p>We can solve this system in matrix form:</p>
    <div class="equation">
        \[
        \begin{bmatrix}
        px_1 & py_1 & 1 & 0 & 0 & 0 \\
        0 & 0 & 0 & px_1 & py_1 & 1 \\
        px_2 & py_2 & 1 & 0 & 0 & 0 \\
        0 & 0 & 0 & px_2 & py_2 & 1 \\
        px_3 & py_3 & 1 & 0 & 0 & 0 \\
        0 & 0 & 0 & px_3 & py_3 & 1
        \end{bmatrix}
        \begin{bmatrix}
        a \\ b \\ c \\ d \\ e \\ f
        \end{bmatrix} =
        \begin{bmatrix}
        qx_1 \\ qy_1 \\ qx_2 \\ qy_2 \\ qx_3 \\ qy_3
        \end{bmatrix}
        \]
    </div>

    <p>This system can be solved using computational software to find the values of a, b, c, d, e, and f, which define the affine transformation matrix.</p>
</html>
        <div class="clear-float"></div>
        <div class="image-gri">
        <div class="image-container">
            <img src="proj2images/taj.jpg" alt="taj.jpg">
            <p class="image-subtitle">Taj Mahal</p>
        </div>
        <div class="image-container">
            <img src="proj2images/taj_sharp.jpg" alt="taj_sharp.jpg">
            <p class="image-subtitle">Sharpened Taj Mahal, alpha = 1</p>
        </div>
        </div>
        <div class="clear-float"></div>
        <div class="image-gri">
        <div class="image-container">
            <img src="proj2images/ataturk.jpg" alt="ataturk.jpg">
            <p class="image-subtitle">Mustafa Kemal Ataturk</p>
        </div>
        <div class="image-container">
            <img src="proj2images/ataturk_sharp.jpg" alt="ataturk_sharp.jpg">
            <p class="image-subtitle">Sharpened Mustafa Kemal Ataturk, alpha = 1.2</p>
        </div>
        </div>
        <div class="clear-float"></div>
        <div class="image-container">
            <img src="proj2images/galatasaray.jpg" alt="galatasaray.jpg">
            <p class="image-subtitle">Galatasaray players are celebrating defeating Fenerbahce</p>
        </div>
        <div class="image-container">
            <img src="proj2images/galatasaray_sharp.jpg" alt="galatasaray_sharp.jpg">
            <p class="image-subtitle">Sharpened Galatasaray players are celebrating defeating Fenerbahce, alpha = 2</p>
        </div>
        </div>
        <div class="clear-float"></div>
        <h2>Part 3: The Morph Sequence</h2>
            <p>For this part, my goal is to sharpen images. In order to sharpen an image, I apply Gaussian filter to get the low frequencies of the image. When the low frequencies are substracted from the original image, I get the high frequencies of the image. By adding the high frequencies to the original image, original image can be sharpened. I combines these operations into a single convolution operation which can be formulized convolving each channel of the image with (1 + alpha) * unit_impulse - alpha * gauss_kernel where alpha is the coefficient of the sharpening. </p>
        <div class="clear-float"></div>
        <div class="image-gri">
        <div class="image-container">
            <img src="proj2images/taj.jpg" alt="taj.jpg">
            <p class="image-subtitle">Taj Mahal</p>
        </div>
        <div class="image-container">
            <img src="proj2images/taj_sharp.jpg" alt="taj_sharp.jpg">
            <p class="image-subtitle">Sharpened Taj Mahal, alpha = 1</p>
        </div>
        </div>
        <div class="clear-float"></div>
        <h2>Part 4: The "Mean face" of a population</h2>
            <p>For this part, my goal is to sharpen images. In order to sharpen an image, I apply Gaussian filter to get the low frequencies of the image. When the low frequencies are substracted from the original image, I get the high frequencies of the image. By adding the high frequencies to the original image, original image can be sharpened. I combines these operations into a single convolution operation which can be formulized convolving each channel of the image with (1 + alpha) * unit_impulse - alpha * gauss_kernel where alpha is the coefficient of the sharpening. </p>
        <div class="clear-float"></div>
        <div class="image-gri">
        <div class="image-container">
            <img src="proj2images/taj.jpg" alt="taj.jpg">
            <p class="image-subtitle">Taj Mahal</p>
        </div>
        <div class="image-container">
            <img src="proj2images/taj_sharp.jpg" alt="taj_sharp.jpg">
            <p class="image-subtitle">Sharpened Taj Mahal, alpha = 1</p>
        </div>
        </div>
        <div class="clear-float"></div>
        <h2>Part 5: Caricatures: Extrapolating from the mean</h2>
            <p>For this part, my goal is to sharpen images. In order to sharpen an image, I apply Gaussian filter to get the low frequencies of the image. When the low frequencies are substracted from the original image, I get the high frequencies of the image. By adding the high frequencies to the original image, original image can be sharpened. I combines these operations into a single convolution operation which can be formulized convolving each channel of the image with (1 + alpha) * unit_impulse - alpha * gauss_kernel where alpha is the coefficient of the sharpening. </p>
        <div class="clear-float"></div>
        <div class="image-gri">
        <div class="image-container">
            <img src="proj2images/taj.jpg" alt="taj.jpg">
            <p class="image-subtitle">Taj Mahal</p>
        </div>
        <div class="image-container">
            <img src="proj2images/taj_sharp.jpg" alt="taj_sharp.jpg">
            <p class="image-subtitle">Sharpened Taj Mahal, alpha = 1</p>
        </div>
        </div>
        <div class="clear-float"></div>
        <h2>Part 6: Bells and Whistles</h2>
            <p>For this part, my goal is to sharpen images. In order to sharpen an image, I apply Gaussian filter to get the low frequencies of the image. When the low frequencies are substracted from the original image, I get the high frequencies of the image. By adding the high frequencies to the original image, original image can be sharpened. I combines these operations into a single convolution operation which can be formulized convolving each channel of the image with (1 + alpha) * unit_impulse - alpha * gauss_kernel where alpha is the coefficient of the sharpening. </p>
        <div class="clear-float"></div>
        <div class="image-gri">
        <div class="image-container">
            <img src="proj2images/taj.jpg" alt="taj.jpg">
            <p class="image-subtitle">Taj Mahal</p>
        </div>
        <div class="image-container">
            <img src="proj2images/taj_sharp.jpg" alt="taj_sharp.jpg">
            <p class="image-subtitle">Sharpened Taj Mahal, alpha = 1</p>
        </div>
        </div>
        <div class="clear-float"></div>
    </div>
</body>
</html>
    </div>
</body>
</html>
